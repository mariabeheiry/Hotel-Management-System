@model IEnumerable<Hotel_Management_System.Models.Booking>

@{
    ViewData["Title"] = "Bookings";
}

<style>
    body {
        background: linear-gradient(135deg, #eef2f3 0%, #dfe9f3 100%);
    }

    h1 {
        font-weight: 800;
        color: #2c3e50;
        margin-bottom: 25px;
    }

    /* Filter Card */
    .filter-card {
        background: rgba(255, 255, 255, 0.95);
        padding: 20px 25px;
        border-radius: 18px;
        box-shadow: 0 12px 28px rgba(0, 0, 0, 0.12);
        border-left: 6px solid #0061ff;
        margin-bottom: 25px;
    }

    /* Table Card */
    .table-card {
        background: rgba(255, 255, 255, 0.95);
        padding: 25px 30px;
        border-radius: 18px;
        box-shadow: 0 12px 28px rgba(0, 0, 0, 0.12);
    }

    .form-control,
    .form-select {
        border-radius: 10px;
        padding: 8px 12px;
    }

    table thead th {
        background-color: #f4f6f9;
        color: #34495e;
        font-weight: 700;
        text-align: center;
        vertical-align: middle;
    }

    table tbody td {
        vertical-align: middle;
        text-align: center;
        color: #2c3e50;
    }

    .table-hover tbody tr:hover {
        background-color: #f0f4ff;
    }

    /* Action Buttons */
    .btn {
        border-radius: 10px;
        font-weight: 600;
        padding: 5px 12px;
    }

    .btn-primary {
        background: linear-gradient(135deg, #0061ff, #0047cc);
        border: none;
    }

    .btn-danger {
        background: linear-gradient(135deg, #ff4d4d, #ff1a1a);
        border: none;
    }

    .btn-secondary {
        background: linear-gradient(135deg, #7f8c8d, #5f6a6a);
        border: none;
    }
</style>

<h1>Bookings</h1>

<!-- FILTERS -->
<div class="filter-card">
    <div class="row">
        <div class="col-md-6 mb-2">
            <input type="text"
                   id="searchBox"
                   class="form-control"
                   placeholder="Search by Guest or Room..." />
        </div>

        <div class="col-md-3 mb-2">
            <select id="statusFilter" class="form-select">
                <option value="All">All Statuses</option>
                <option value="Confirmed">Confirmed</option>
                <option value="Cancelled">Cancelled</option>
                <option value="Completed">Completed</option>
            </select>
        </div>
    </div>
</div>

<!-- TABLE -->
<div class="table-card">
    <table class="table table-striped table-bordered table-hover mb-0">
        <thead>
            <tr>
                <th>Guest</th>
                <th>Room</th>
                <th>Check-In</th>
                <th>Check-Out</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="bookingsTableBody">
            @await Html.PartialAsync("_BookingSearchResults", Model)
        </tbody>
    </table>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {

            function updateBookings() {
                var term = $("#searchBox").val();
                var status = $("#statusFilter").val();

                $.get('@Url.Action("SearchBookings", "Bookings")', { term: term, statusFilter: status }, function (data) {
                    $("#bookingsTableBody").html(data);
                });
            }

            $("#searchBox").on("keyup", updateBookings);
            $("#statusFilter").on("change", updateBookings);
        });
    </script>
}
